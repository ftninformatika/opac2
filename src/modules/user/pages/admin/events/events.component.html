<button id="btn-add-event" type="button" mdbBtn color="default" rounded="true" data-toggle="modal" data-target="#basicExample"
        (click)="modalDialog.show()" mdbWavesEffect>Додај догађај
</button>


<div class="container">
  <div class="row">
    <div class="col-md-6 mx-auto">
      <div class="md-form">
        <input type="text" class="form-control" [(ngModel)]="searchText" (keyup)="searchItems()" id="search-input"
               mdbInput>
        <label for="search-input">Претражи</label>
      </div>
    </div>
    <table mdbTable #tableEl="mdbTable" stickyHeader="true" hover="true" striped="true" class="z-depth-1">
      <thead class="sticky-top">
      <tr>
        <th *ngFor="let head of headElements; let i = index" [mdbTableSort]="events" [sortBy]="sortFields[i]"
            scope="col">{{head | titlecase}}
          <mdb-icon *ngIf="head !== ''" fas icon="sort"></mdb-icon>
        </th>
      </tr>
      </thead>
      <tbody #row>
      <tr *ngFor="let ev of events; let i = index">
        <td *ngIf="i+1 >= mdbTablePagination.firstItemIndex && i < mdbTablePagination.lastItemIndex">
          <img src="../../../../../assets/icons/icon-72x72.png" height="80" width="80">
        </td>
        <td *ngIf="i+1 >= mdbTablePagination.firstItemIndex && i < mdbTablePagination.lastItemIndex">{{ev.title}}</td>
        <td *ngIf="i+1 >= mdbTablePagination.firstItemIndex && i < mdbTablePagination.lastItemIndex">{{ev.content}}</td>
        <td *ngIf="i+1 >= mdbTablePagination.firstItemIndex && i < mdbTablePagination.lastItemIndex">{{ev.date}}</td>
        <td *ngIf="i+1 >= mdbTablePagination.firstItemIndex && i < mdbTablePagination.lastItemIndex">
           <span class="table-remove">
              <div class="remove-from-shelf" mdbTooltip="Измени" placement="left" style="cursor: pointer">
              <i class="fas fa-edit orange-text fa-2x"></i>
            </div>
           </span>
        </td>
        <td *ngIf="i+1 >= mdbTablePagination.firstItemIndex && i < mdbTablePagination.lastItemIndex">
           <span class="table-remove">
              <div class="remove-from-shelf" mdbTooltip="Избриши" placement="left" style="cursor: pointer">
              <i class="fas fa-trash red-text fa-2x"></i>
            </div>
           </span>
        </td>
      </tr>
      </tbody>
      <tfoot class="grey lighten-5 w-100">
      <tr>
        <td colspan="6">
          <mdb-table-pagination [tableEl]="tableEl" paginationAlign=""
                                [searchDataSource]="events">
          </mdb-table-pagination>
        </td>
      </tr>
      </tfoot>
    </table>
  </div>
</div>


<div mdbModal #modalDialog="mdbModal" class="modal fade" id="frameModalTop" tabindex="-1" role="dialog"
     aria-labelledby="myModalLabel" aria-hidden="true" (close)="closeDialog()" data-mdb-target="#eventModal">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">
          <mdb-icon id="calendar-icon" far icon="calendar-alt"></mdb-icon>
          Догађај
        </h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="modalDialog.hide()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="orangeForm-name" class="form-control" [formControl]="title" [(ngModel)]="event.title"
                 mdbInput mdbValidate>
          <label for="orangeForm-name">* Наслов</label>
          <mdb-error *ngIf="title.invalid && (title.dirty || title.touched)">
            Наслов је обавезан
          </mdb-error>
        </div>
        <div class="md-form mb-5">
          <textarea class="md-textarea form-control " rows="2" id="content" type="text" length="120"
                    [(ngModel)]="event.content" [formControl]="content" mdbCharCounter mdbInput mdbValidate></textarea>
          <label for="content">* Садржај</label>
          <mdb-error
            *ngIf="content.invalid && (content.dirty || content.touched)">Садржај је обавезан
          </mdb-error>
        </div>

        <div class="md-form mb-4">
          <mdb-date-picker name="date" #datePicker [options]="myDatePickerOptions" [placeholder]="'* Изаберите датум'"
                           id="date" [locale]="'sr'" [formControl]="date" [(ngModel)]="event.date" required>
          </mdb-date-picker>
          <mdb-error
            *ngIf="date.invalid && (date.dirty || date.touched)">
            Датум је обавезан
          </mdb-error>
        </div>

        <div class="file-field md-form">
          <label for="file" class="custom-file-upload">
            <i class="fa fa-cloud-upload"></i> Изаберите фотографију
          </label>
          <input id="file" #file type="file" accept='image/*' (change)="onImageUpload(file.files)"
                 data-buttonText="Izaberite"/>
        </div>

        <div class="md-form mb-4">
          <img *ngIf="!this.selectedImage; else newImage" src="../../../../../assets/icons/icon-96x96.png" height="100"
               width="100" alt="Фотографија">
          <ng-template #newImage>
            <img *ngIf="this.selectedImage" src="{{imgURL}}" height="100" width="100" alt="Фотографија">
          </ng-template>
          <input [disabled] class="file-path" type="text" placeholder="Назив фотографије"
                 [value]="this.selectedImage?.name">

        </div>
      </div>
      <div class="modal-footer d-flex justify-content-center">
        <button mdbBtn color="default" class="waves-light" mdbWavesEffect (click)="onBtnCreateEvent()">Направи</button>
      </div>
    </div>
  </div>
</div>
